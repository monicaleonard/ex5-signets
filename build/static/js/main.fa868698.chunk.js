(this["webpackJsonpex5-signets"]=this["webpackJsonpex5-signets"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},181:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(14),i=n.n(a),s=(n(159),n(30)),o=n(25),u=n(17),l=(n(160),n(161),n(339)),d=n(325),j=n(9),b=n(133),f=(n(290),n(103),{apiKey:"AIzaSyBbip3noGuvFzsY6-FFwIfOa38yyie595U",authDomain:"monicaleonard-react.firebaseapp.com",projectId:"monicaleonard-react",storageBucket:"monicaleonard-react.appspot.com",messagingSenderId:"1011201813009",appId:"1:1011201813009:web:9094df5401658057f5dfb0"}),p="utilisateurs-ex5",h="dossiers";j.a.apps.length||j.a.initializeApp(f);var m=j.a.auth(),O=new b.a.AuthUI(m),x=j.a.firestore();n(170);function v(e){m.onAuthStateChanged((function(t){var n,r,c;e(t),t&&(n=t.uid,r=t.displayName,c=t.email,x.collection(p).doc(n).set({nom:r,courriel:c,datecompte:j.a.firestore.FieldValue.serverTimestamp()},{merge:!0}))}))}var g=n(7);function y(e){var t=e.utilisateur;return Object(g.jsxs)("header",{className:"Entete",children:[Object(g.jsxs)("div",{className:"logo",children:["Signets",Object(g.jsx)(d.a,{variant:"outlined",size:"small",className:"btn-deconnexion",onClick:function(){m.signOut()},children:"D\xe9connexion"})]}),Object(g.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(g.jsx)(l.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}var N=n(23),k=n.n(N),w=n(32),D=(n(177),n(178),n(329)),C=n(144),A=n(337),S=n(136),F=n.n(S),I=n(137),B=n.n(I),E=n.p+"static/media/couverture.2dc9ece9.webp";function R(e){var t=e.id,n=e.nom,c=e.couleur,a=e.datemodif,i=e.couverture,s=e.gererSupprimer,o=Object(r.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1];function b(){j(null)}return Object(g.jsxs)("article",{className:"Dossier",style:{backgroundColor:c},children:[Object(g.jsxs)("div",{className:"couverture",children:[Object(g.jsx)(D.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(g.jsx)(F.a,{})}),Object(g.jsx)("img",{src:i||E,alt:n})]}),Object(g.jsxs)("div",{className:"info",children:[Object(g.jsx)("h2",{children:n}),Object(g.jsxs)("p",{children:["Modifi\xe9 : ",V(a)]})]}),Object(g.jsx)(D.a,{id:t,className:"modifier","aria-label":"modifier",size:"small","aria-haspopup":"true","aria-controls":"maj-dossier",onClick:function(e){j(e.currentTarget)},children:Object(g.jsx)(B.a,{})}),Object(g.jsxs)(C.a,{id:"maj-dossier",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:b,children:[Object(g.jsx)(A.a,{onClick:b,children:"Modifier"}),Object(g.jsx)(A.a,{onClick:function(){s(t),b()},children:"Supprimer"})]})]})}function V(e){var t=e?new Date(1e3*e.seconds):new Date;return"".concat(t.getDate()," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]," ").concat(t.getFullYear())}function z(){return(z=Object(w.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.datemodif=j.a.firestore.FieldValue.serverTimestamp(),e.next=3,x.collection(p).doc(t).collection(h).add(n);case 3:return r=e.sent,e.abrupt("return",r.get());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return M.apply(this,arguments)}function M(){return(M=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.collection(p).doc(t).collection(h).orderBy("datemodif","desc").get();case 3:return e.sent.forEach((function(e){n.push(Object(s.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.collection(p).doc(t).collection(h).orderBy("nom","asc").get();case 3:return e.sent.forEach((function(e){n.push(Object(s.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.collection(p).doc(t).collection(h).orderBy("nom","desc").get();case 3:return e.sent.forEach((function(e){n.push(Object(s.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return W.apply(this,arguments)}function W(){return(W=Object(w.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.collection(p).doc(t).collection(h).doc(n).delete().then(j.a.firestore.FieldValue.arrayRemove(n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n(334);function J(e){var t=e.utilisateur,n=e.etatDossiers,c=Object(u.a)(n,2),a=c[0],i=c[1];function l(e){return d.apply(this,arguments)}function d(){return(d=Object(w.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t.uid,n).then((function(){var e=Object(o.a)(a).filter((function(e){return e.id!==n}));i(e)})).catch((function(e){return console.log("\xc9chec de la suppression - Firestore a r\xe9pondu :",e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){P(t.uid).then((function(e){return i(e)}))}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"TriDossier",children:Object(g.jsxs)(_.a,{id:"standard-select-currency",select:!0,label:"Tri des dossiers",children:[Object(g.jsx)(A.a,{value:"Date de modification descendante",onClick:function(){P(t.uid).then((function(e){return i(e)}))},children:"Date de modification descendante"},"Date de modification descendante"),Object(g.jsx)(A.a,{value:"Nom de dossier ascendant",onClick:function(){(function(e){return T.apply(this,arguments)})(t.uid).then((function(e){return i(e)}))},children:"Nom de dossier ascendant"},"Nom de dossier ascendant"),Object(g.jsx)(A.a,{value:"Nom de dossier descendant",onClick:function(){(function(e){return G.apply(this,arguments)})(t.uid).then((function(e){return i(e)}))},children:"Nom de dossier descendant"},"Nom de dossier descendant")]})}),Object(g.jsx)("ul",{className:"ListeDossiers",children:a.length>0?a.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(R,Object(s.a)(Object(s.a)({},e),{},{gererSupprimer:l}))},e.id)})):Object(g.jsxs)("li",{className:"msgAucunDossier",children:["Votre liste de dossiers est vide",Object(g.jsx)("p",{children:";-("})]})})]})}var L=n(333),Y=n(142),q=n.n(Y);n(181);function K(){return Object(r.useEffect)((function(){return e="#firebaseui-widget",void O.start(e,{signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(g.jsxs)("div",{className:"Accueil",children:[Object(g.jsxs)("h3",{className:"logo",children:["Signets ",Object(g.jsx)("span",{children:"beta"})]}),Object(g.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(g.jsx)("br",{}),"Simple comme bonjour !"]}),Object(g.jsx)("h4",{className:"connexion-etiquette",children:"Connexion \xe0 Signets"}),Object(g.jsx)("div",{id:"firebaseui-widget"})]})}var H=n(336),Q=n(332),X=n(331),Z=n(338),$=n(143);function ee(e){var t=e.ouvert,n=e.setOuvert,c=e.gererAjout,a=Object(r.useState)(""),i=Object(u.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(""),j=Object(u.a)(l,2),b=j[0],f=j[1],p=Object(r.useState)("#537169"),h=Object(u.a)(p,2),m=h[0],O=h[1];function x(){o(""),f(""),O("#537169")}return Object(g.jsx)("div",{className:"AjouterDossier",children:Object(g.jsxs)(H.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(Z.a,{id:"form-dialog-title",children:"Ajouter un dossier"}),Object(g.jsxs)(X.a,{children:[Object(g.jsx)(_.a,{autoFocus:!0,margin:"dense",id:"nomDossier",label:"Nom du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)},defaultValue:s}),Object(g.jsx)(_.a,{margin:"normal",id:"urlImage",label:"Adresse de l'image de couverture",type:"text",fullWidth:!0,onChange:function(e){return f(e.target.value)},defaultValue:b}),Object(g.jsx)($.a,{width:"100%",triangle:"hide",colors:["#537169","#55BBB2","#F6D2A3","#F3D379","#FB7778","#5990B8"],onChangeComplete:function(e,t){return O(e.hex)},color:m})]}),Object(g.jsxs)(Q.a,{children:[Object(g.jsx)(d.a,{style:{backgroundColor:"#900",color:"#fff",margin:"15px 0"},onClick:function(){n(!1),x()},variant:"contained",children:"Annuler"}),Object(g.jsx)(d.a,{style:{backgroundColor:"#090",color:"#fff",margin:"15px"},className:"btnAjouter",onClick:function(){""!==s&&c(s,b,m),x()},variant:"contained",children:"Ajouter"})]})]})})}function te(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(u.a)(a,2),l=i[0],d=i[1],j=Object(r.useState)(!1),b=Object(u.a)(j,2),f=b[0],p=b[1];return Object(r.useEffect)((function(){return v(c)}),[]),Object(g.jsx)("div",{className:"Appli",children:n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(y,{utilisateur:n}),Object(g.jsxs)("section",{className:"contenu-principal",children:[Object(g.jsx)(J,{utilisateur:n,etatDossiers:a}),Object(g.jsx)(ee,{ouvert:f,setOuvert:p,gererAjout:function(e,t,r){var c={nom:e,couverture:t,couleur:r,signets:[]};(function(e,t){return z.apply(this,arguments)})(n.uid,c).then((function(e){return d([].concat(Object(o.a)(l),[Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})]))})),p(!1)}}),Object(g.jsx)(L.a,{onClick:function(){return p(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(g.jsx)(q.a,{})})]})]}):Object(g.jsx)(K,{})})}i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(te,{})}),document.getElementById("racine"))}},[[288,1,2]]]);